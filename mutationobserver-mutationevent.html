
<!DOCTYPE html>
<html lang="ru-RU">
<head>
  <meta charset="utf-8" />
  <title>Знакомимся с наблюдателями за измененями DOM: Проблемы с событиями изменения DOM</title>
  <link rel="stylesheet" href="mutationobserver.css">
</head>
<body>
<header>
  <h1>Проблемы с событиями изменения DOM</h1>
  <nav><a id="back-link" href="/mutation-observers-tutorial/">Вернуться к статье</a></nav>
</header>

<article>
  <p>В этом примере мы создаем 2500 параграфов и добавляем их во фрагмент документа. Затем мы добавляем этот фрагмент в элемент <code>div</code>. Каждый добавленный документ генерирует новое событие <code>DOMNodeInserted</code> и вызывает его обработчик.</p>
  <p>Событие <code>DOMNodeInserted</code> вызвано <b class="numevents">0</b> раз(а).</p>
  <p><button>Запустить демо</button></p>
</article>

<div id="demo"></div>

<script src="modemo.js"></script>
<script>
document.getElementById("back-link").addEventListener('click',function(event){
  event.preventDefault();
  console.log(history.length);
  history.go(-1);
},false);
(function(d){
  var demo = d.getElementById('demo');
  eventcount = 0;
  onnodeinsert = function(){
    eventcount++;
    var numevents = d.querySelector('.numevents');
    numevents.textContent = eventcount;
  }
  demo.addEventListener('DOMNodeInserted',onnodeinsert,false);
})(document);
</script>

</body>
</html>